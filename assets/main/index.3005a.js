window.__require=function t(e,o,n){function r(c,s){if(!o[c]){if(!e[c]){var p=c.split("/");if(p=p[p.length-1],!e[p]){var a="function"==typeof __require&&__require;if(!s&&a)return a(p,!0);if(i)return i(p,!0);throw new Error("Cannot find module '"+c+"'")}c=p}var u=o[c]={exports:{}};e[c][0].call(u.exports,function(t){return r(e[c][1][t]||t)},u,u.exports,t,e,o,n)}return o[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<n.length;c++)r(n[c]);return r}({ManagerScript:[function(t,e,o){"use strict";cc._RF.push(e,"7df30cqt0pB4r72soAiAMiR","ManagerScript");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./NekkoScript"),s=t("./NenechiScript"),p=cc._decorator,a=p.ccclass,u=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.currentNekko=null,e}return r(e,t),e.prototype.start=function(){},e.prototype.update=function(){var t=this;if(null==this.currentNekko){var e=cc.instantiate(this.nekkoPrefab);this.currentNekko=e.getComponent(c.default),e.parent=this.node,e.setPosition(cc.v3(0,-200,0)),this.currentNekko.destroyCallback=function(){t.currentNekko=null}}this.currentNekko.isDragState()?this.nenechi.onDown():this.currentNekko.isNormalState()?this.nenechi.onNormal():this.currentNekko.isPullOutState()&&this.nenechi.onUp()},i([u(cc.Prefab)],e.prototype,"nekkoPrefab",void 0),i([u(s.default)],e.prototype,"nenechi",void 0),i([a],e)}(cc.Component);o.default=h,cc._RF.pop()},{"./NekkoScript":"NekkoScript","./NenechiScript":"NenechiScript"}],NekkoScript:[function(t,e,o){"use strict";cc._RF.push(e,"194dfowUqxA/LNCMSomf++W","NekkoScript");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./screenDragScript"),s=cc._decorator,p=s.ccclass,a=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nekkoList=[],e.targetXScale=.3,e.isPullOuted=!1,e.pullOutSeeta=0,e.dragDelta=cc.Vec2.ZERO,e.defaultPos=cc.Vec3.ZERO,e.releaseLerp=0,e.popLerp=0,e}return r(e,t),e.prototype.start=function(){var t=this;this.body=this.getComponent(cc.RigidBody),this.defaultPos=this.node.position,this.nekkoFallNode=cc.find("Canvas/NekkoFall"),this.screenNode=cc.find("Canvas/TouchScreen"),this.screenDrag=this.screenNode.getComponent(c.default),this.screenDrag.touchAction=function(e){t.onTouchStart(e)},this.screenDrag.dragAction=function(e){t.onTouchMove(e)},this.screenDrag.touchEndAction=function(e){t.onTouchEnd(e)},this.mainSprite.spriteFrame=this.nekkoList[Math.floor(6*Math.random())],this.node.setPosition(this.defaultPos.x,this.defaultPos.y-50,0)},e.prototype.update=function(t){if(this.releaseLerp=Math.max(0,this.releaseLerp-t),this.popLerp=Math.min(1,this.popLerp+3*t),this.popLerp<1){var e=this.node.position.lerp(this.defaultPos,this.popLerp);this.node.setPosition(e)}else if(0==this.isPullOuted&&0==this.screenDrag.isTouch()){var o=cc.misc.lerp(this.node.position.x,this.defaultPos.x,1-this.releaseLerp),n=cc.misc.lerp(this.node.position.y,this.defaultPos.y,1-this.releaseLerp);this.node.setPosition(cc.v2(o,n)),this.node.setScale(cc.misc.lerp(this.node.scale,1,1-this.releaseLerp))}this.isPullOuted&&this.updatePullOut(t),this.node.position.y<-500&&this.node.destroy()},e.prototype.onTouchStart=function(){console.log("ontouchstart")},e.prototype.onTouchMove=function(t){if(this.popLerp<1||this.isPullOuted||t.getDeltaY()<0)this.screenDrag.forceRelease();else if(this.dragDelta.x+=t.getDeltaX(),this.dragDelta.y+=t.getDeltaY(),!(this.dragDelta.y<2&&this.dragDelta.x<1)){var e=Math.min(1,10/this.dragDelta.y),o=t.getDeltaY()*e,n=t.getDeltaX()*e*.3;this.node.setPosition(cc.v3(this.node.position.x+n,this.node.position.y+o,0)),this.node.setScale(cc.v2(cc.misc.clamp01(1-(this.targetXScale-this.targetXScale*e)),1)),e<.05&&this.onPullOut()}},e.prototype.onTouchEnd=function(){this.releaseLerp=1,this.dragDelta=cc.Vec2.ZERO},e.prototype.onPullOut=function(){this.node.setScale(1),this.body.type=cc.RigidBodyType.Dynamic,this.body.applyLinearImpulse(cc.v2(2*this.dragDelta.x,this.dragDelta.y*(7+3*Math.random())),cc.Vec2.ZERO,!0),this.body.angularVelocity*=.01,this.isPullOuted=!0},e.prototype.updatePullOut=function(){this.body.linearVelocity.y<0&&(this.node.parent=this.nekkoFallNode,null!=this.destroyCallback&&(this.destroyCallback(),this.destroyCallback=null))},e.prototype.isPullOutState=function(){return this.isPullOuted},e.prototype.isNormalState=function(){return 0==this.isDragState()&&0==this.isPullOuted},e.prototype.isDragState=function(){return(0!=this.dragDelta.x||0!=this.dragDelta.y)&&0==this.isPullOuted},e.prototype.onDestroy=function(){},i([a(cc.Sprite)],e.prototype,"mainSprite",void 0),i([a(cc.SpriteFrame)],e.prototype,"nekkoList",void 0),i([p],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./screenDragScript":"screenDragScript"}],NenechiScript:[function(t,e,o){"use strict";cc._RF.push(e,"800c5Ukeu5HKoMmfbC2/rQq","NenechiScript");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,p=c.property,a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.start=function(){},e.prototype.onNormal=function(){this.mainSprite.spriteFrame=this.normalNenechi},e.prototype.onUp=function(){this.mainSprite.spriteFrame=this.upNenechi},e.prototype.onDown=function(){this.mainSprite.spriteFrame=this.downNenechi},i([p(cc.Sprite)],e.prototype,"mainSprite",void 0),i([p(cc.SpriteFrame)],e.prototype,"normalNenechi",void 0),i([p(cc.SpriteFrame)],e.prototype,"upNenechi",void 0),i([p(cc.SpriteFrame)],e.prototype,"downNenechi",void 0),i([s],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],screenDragScript:[function(t,e,o){"use strict";cc._RF.push(e,"1c9c3Vq43dP9oAwWpPAnlGZ","screenDragScript");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,p=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.touchAction=null,e.dragAction=null,e.touchEndAction=null,e.onTouch=!1,e}return r(e,t),e.prototype.onLoad=function(){cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().enabledAccumulator=!0},e.prototype.start=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},e.prototype.update=function(){},e.prototype.isTouch=function(){return this.onTouch},e.prototype.forceRelease=function(){this.onTouch=!1,null!=this.touchEndAction&&this.touchEndAction(null)},e.prototype.onTouchStart=function(t){this.onTouch||(this.onTouch=!0,null!=this.touchAction&&this.touchAction(t))},e.prototype.onTouchMove=function(t){0!=this.onTouch&&null!=this.dragAction&&this.dragAction(t)},e.prototype.onTouchEnd=function(t){0!=this.onTouch&&(this.onTouch=!1,null!=this.touchEndAction&&this.touchEndAction(t))},i([s],e)}(cc.Component));o.default=p,cc._RF.pop()},{}]},{},["ManagerScript","NekkoScript","NenechiScript","screenDragScript"]);